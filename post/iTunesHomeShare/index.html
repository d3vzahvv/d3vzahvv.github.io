<html>
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@SuWhuo" />
    <meta name="twitter:creator" content="@SuWhuo" />
    <meta property="og:title" content="iTunes 家庭媒体 " />
    <meta property="og:image" content="https://wushuo.ink/images/avatar.png" />
    <meta property="og:description" content="&lt;p&gt;流式传输定义很广泛，主要指通过网络传送流媒体 ( 如视频，音频 ) 的技术总称。其特定含义为通过网络将影视节目传送到终端。为了通过 Wi-Fi 传输数字音乐，AirPlay 使用 RTSP 协议，即实时流协议。Apple Lossless 音频编解码器以 44100Hz 的速度传输两个音频通道。&lt;/p&gt;
" />
    <meta property="og:url" content="https://wushuo.ink/post/iTunesHomeShare/ " />
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>iTunes 家庭媒体 | Shuo</title>

<link rel="shortcut icon" href="https://wushuo.ink/favicon.ico?v=1635772571170">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://wushuo.ink/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first">
            Shuo
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            首页
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link">
                            归档
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            标签
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            关于
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1635772571170" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    iTunes 家庭媒体
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        · 2021-07-20 ·
                    </time>
                    
                        <a href="https://wushuo.ink/tag/iIjVx5LIh/" class="post-tags">
                            # 杂谈
                        </a>
                    
                        <a href="https://wushuo.ink/tag/HWd8FqIYiW/" class="post-tags">
                            # 技术
                        </a>
                    
                        <a href="https://wushuo.ink/tag/-sN5yHHAaj/" class="post-tags">
                            # 生活
                        </a>
                    
                </div>
                <div class="post-content">
                    <p>流式传输定义很广泛，主要指通过网络传送流媒体 ( 如视频，音频 ) 的技术总称。其特定含义为通过网络将影视节目传送到终端。为了通过 Wi-Fi 传输数字音乐，AirPlay 使用 RTSP 协议，即实时流协议。Apple Lossless 音频编解码器以 44100Hz 的速度传输两个音频通道。</p>
<!-- more -->
<p>请注意，本文会出现数张较高分辨率照片，它们或为 1280x720 webp 格式，为了确保图片可以被正常加载，你需要确认以下事项：</p>
<ul>
<li>能够正常访问 <a href="https://github.com">Github</a> 且能够透过 jsDelivr 以正常速度加载图片</li>
<li>你的设备或浏览器要求兼容 webp 格式的图像，这里特指 Apple 设备及 Safari 浏览器。Safari 浏览器需要更新至支持 webp 的版本，通常来说需要 iOS 14 以上的 iOS 设备或 macOS 11 Big Sur 以上且已经更新至最新 Safari 的 Mac 设备</li>
<li>若满足以上两项仍然出现图片加载缓慢，请耐心等待，全站已开启惰性加载 ( Lazy Loading )</li>
</ul>
<h3 id="目录">目录</h3>
<ul>
<li><a href="#airplay-%E4%BB%8B%E7%BB%8D">Airplay 介绍</a></li>
<li><a href="#itunes-%E8%B5%84%E6%96%99%E5%BA%93%E6%9E%84%E5%BB%BA">iTunes 家庭资料库构建</a></li>
<li><a href="#itunes-%E8%B5%84%E6%96%99%E5%BA%93%E6%95%B4%E7%90%86">iTunes 家庭资料库整理</a></li>
<li><a href="#%E5%BD%B1%E7%89%87%E6%B7%B7%E6%B5%81%E5%89%AA%E8%BE%91%E4%BF%AE%E6%94%B9%E5%AD%97%E5%B9%95">影片混流剪辑修改字幕</a></li>
<li><a href="#%E4%B8%AA%E4%BA%BA%E9%85%8D%E7%BD%AE%E6%96%B9%E6%A1%88">个人配置方案</a></li>
<li><a href="#%E7%BB%93%E5%B0%BE">结尾</a></li>
</ul>
<h3 id="airplay-介绍">Airplay 介绍</h3>
<p>Airplay 是 Apple 的私有协议，可以使得媒体在 iOS 和 macOS 设备之间流转，同时可以传输媒体的元数据，如封面，艺人，类型，分类等</p>
<p>Airplay 在简体中文系统中被翻译为了隔空播放，可以在 iOS 和 macOS 的控制中心打开，同时本文所介绍的基于 iTunes 的家庭媒体系统也是通过 Airplay 流转至播放终端</p>
<p>Airplay 工作原理为在发射端 ( 如 Mac 或 iPhone ) 将流媒体加密，通过 RTSP 协议与接收端握手，将流媒体传输到接收端 ( 通常是 Apple TV 和 HomePod ) 进行硬解码和播放<sup>1</sup></p>
<p>显然，Airplay 的传输速度取决于局域网的网速，当然也受限于发射端与接收端的速度，如果局域网内基于 RTSP 协议的速度无法到达视频的码率，观影体验将会糟糕<br>
这里以《普罗米亚》这部影片为例，音频视频总比特率为 13003kbps，这意味着在 RTSP 协议下需要至少 14Mbps 的速度提供较为流畅的播放体验，即我们日常所说的 14M 宽带，但由于 RTSP 协议本身速度并不能达到峰值网速以及 Airplay 协议由多个不同协议构成，建议的网速被要求在 50Mbps 以上</p>
<p>本文中，我们以 Mac 或 PC 作为发射端，iPhone，iPad，Apple TV 作为接收端</p>
<h3 id="itunes-资料库构建">iTunes 资料库构建</h3>
<p>为了得以构建在局域网络运行良好的 iTunes 资料库以便流式传输</p>
<ul>
<li>发射端 ( 即存储影片的设备 ) 为一台 Mac 或 PC，并且安装了较新的操作系统和 iTunes</li>
<li>接收端 ( 即用来观看影片的设备 ) 应该为 Apple 设备 ( 如 Apple TV，iPhone，iPad，Mac )，即使 PC 版 iTunes 也能观看，但体验糟糕</li>
<li>局域网络速度至少应该在 50Mbps 以上</li>
</ul>
<p>如果使用 PC 构建 iTunes 资料库，参考：<br>
<a href="https://support.apple.com/zh-cn/guide/itunes/itns41350225/windows">通过 PC 上 iTunes 中的“家庭共享”将内容流化到 Apple TV</a><sup>2</sup></p>
<p>如果通过 Mac 上的 iTunes Store 构建 iTunes 资料库 ( 通常为 Mac OS X Lion 至 macOS Mojave )，参考：<br>
<a href="https://support.apple.com/zh-cn/guide/tv/atvbc876df1e/tvos">配置运行 macOS Mojave 及更早版本的 Mac，或者 Windows PC：在 iTunes 中，前往“文件”&gt;“家庭共享”，然后选取“打开家庭共享”。输入您的 Apple ID 和密码，然后点按“打开家庭共享”</a><sup>3</sup></p>
<p>如果通过 Mac 上的 Apple Music App 以及 Apple TV App 构建 iTunes 资料库 ( macOS Catalina 及之后版本 )，参考：<br>
<a href="https://support.apple.com/zh-cn/HT202190">使用“家庭共享”将媒体从电脑共享到其他设备</a><sup>4</sup></p>
<p>请注意，无论使用哪一种方法构建 iTunes 资料库，发射端与接收端都必须处在同一网络下，并且登录相同的 Apple ID</p>
<h3 id="itunes-资料库整理">iTunes 资料库整理</h3>
<p>Apple 官方给出了<a href="https://support.apple.com/zh-cn/guide/tvapp-mac/atvbe9ddc3f/1.1/mac/11.0">如何在 Apple TV App 中整理 iTunes 资料库</a>，但并未给出细节</p>
<p>这里本文给出如何对<strong>元数据</strong> ( <em>metadata</em> ) 进行管理，包括 iTunes 资料库如何透过元数据自动管理分类<br>
以 Apple TV App / macOS Catalina 为例</p>
<p>请注意，Apple TV App 或 iTunes 会询问是否将流媒体整齐有序的排列，其本质是建立单独的文件夹“媒体”，并将拖入 Apple TV App ( 或 iTunes ) 或 使用 Apple TV App ( 或 iTunes ) 添加的本地媒体<strong>复制</strong>到“媒体”文件夹中。同时，这意味着 Apple TV App ( 或 iTunes ) 对“媒体”文件夹拥有<strong>完全读写权力</strong>，这一点非常重要</p>
<h4 id="导入流媒体">导入流媒体</h4>
<p>要想导入流媒体进入资料库，只需要拖入流媒体文件至  Apple TV App ( 或 iTunes ) ，App 会自动将流媒体文件复制到 App 目录下 ( 一般为“媒体”或 “iTunes”)<br>
<img src="https://wushuo.ink/post-images/1627010596998.webp" alt="" loading="lazy"></p>
<h4 id="分类流媒体">分类流媒体</h4>
<p>点击媒体的 更多信息-显示简介-选项，即可开始分类，通常分类选项为三种：影片，电视剧，家庭视频</p>
<ul>
<li>影片一般为单集流媒体，如电影，纪录片</li>
<li>电视剧一般为多集流媒体如，如动画番剧，电视连续剧</li>
<li>家庭视频一般为自己拍摄的生活视频</li>
</ul>
<figure data-type="image" tabindex="1"><img src="https://wushuo.ink/post-images/1627014602113.webp" alt="" loading="lazy"></figure>
<h4 id="为流媒体设置详细信息即元数据">为流媒体设置详细信息即元数据</h4>
<p>电视剧的设置选项最多且复杂，这里以电视剧为例：</p>
<ul>
<li>标题：本集电视剧的标题，并非电视剧总标题，如第 114514 集标题《你怎么穿着品如的衣服》</li>
<li>节目：电视剧的总标题，如《回家的诱惑》，同一部电视剧每一集的节目应该设置为一样，资料库会将其自动归档到同一电视剧节目下</li>
<li>季：英语 Season 的翻译，国内电视剧很少有“季”的概念，这里也指代第几部，如《爱情公寓 4》就是第 4 季</li>
<li>剧集：本集电视剧在本季中属于第几集，如如《爱情公寓 2》第 1 集的剧集是 1</li>
<li>剧集 ID：本集电视剧在整个系列中的ID，如《爱情公寓 2》第 1 集的剧集 ID 是 53 ( 第一季为 52 集 )</li>
<li>发布日期：本集电视剧的发布日期</li>
<li>归类：自己定义的类</li>
<li>类型：如群像，爱情，动作，爱情动作等等，自己定义即可选择归类，比“归类”更加实用</li>
<li>年份：该季发布的年份</li>
</ul>
<p>请注意，iTunes 资料库主要通过<strong>元数据</strong> ( <em>metadata</em> ) 进行自动归档，在电视剧设置中，切勿将标题与节目设置错误 ( 例如每一集设置重复的标题而非重复的节目 )，由于资料库对其“媒体”文件夹有<strong>完全读写权力</strong>，“媒体”文件夹内的流媒体文件可能会被自动<strong>覆盖</strong> ( <em>overwrite</em> )，导致珍贵的流媒体文件丢失</p>
<figure data-type="image" tabindex="2"><img src="https://wushuo.ink/post-images/1627014607595.webp" alt="" loading="lazy"></figure>
<h3 id="影片混流剪辑修改字幕">影片混流剪辑修改字幕</h3>
<p>在 Apple 设备上，mp4 / m4v 格式才能够被原生播放，而 mkv 格式则需要被第三方播放器播放<br>
在 iOS / Mac 设备上，我们可以轻松安装第三方播放器，例如 <a href="https://apps.apple.com/us/app/aplayer-alook-player/id1420356569">Avplayer</a> / <a href="https://iina.io/">IINA</a>，但对于 Apple TV ( 特别是 Apple TV 2 和 Apple TV 3 )，无法识别 iTunes 资料库的 mkv 格式流媒体，在这里对格式转换做简略介绍</p>
<p>在这里我们只讨论对于关键帧操作的<strong>无损</strong> ( <em>Lossless</em> ) 分割和转换，目前主要流行的工具为 <strong>ffmpeg</strong></p>
<ul>
<li>调用 ffmpeg 进行流媒体容器转换，速度快且无损，如将 mkv 快速转换为 mp4，对于电影来说通常只需数秒</li>
<li>使用开源跨平台软件 LosslessCut 进行操作，LosslessCut 完全支持 ffmpeg，并且带有友好的图形界面和剪辑轨道</li>
</ul>
<p>对于流媒体字幕，我们可能需要对字幕文件进行修改，这里使用 <strong>gMKVExtractGUI</strong> 进行视频，音频和字幕的分离，使用文本编辑器 ( 如 VScode ) 对字幕进行修改，再使用 <strong>MKVTool</strong> 进行混流，得到封装完成的 mkv 格式的流媒体文件</p>
<h3 id="个人配置方案">个人配置方案</h3>
<p>我将 Mac mini 2014 作为发射端，将我的资料库存储在其中并开启资料库家庭共享，使用 Apple TV 3 作为接受端，只需要将 Mac mini 2014 全天运行 ( Mac 可以全天工作 )，就可以随时打开电视观看 Mac mini 硬盘内的影片<br>
同时，我的另一台 Mac，iPhone，iPad 也能在任何时候访问资料库内的影片</p>
<h3 id="结尾">结尾</h3>
<p>从网络上下载影片，番剧，或是电视连续剧，仅供个人交流学习使用，属于版权问题的灰色地带<br>
如果经济条件允许，选择如 <a href="https://www.netflix.com/">Netflix</a> 的平台在线观看更好</p>
<p>文献参考</p>
<ul>
<li>[1]  维基百科：<a href="https://en.wikipedia.org/wiki/AirPlay">AirPlay is a proprietary wireless communication protocol stack/suite developed by Apple Inc. that allows streaming between devices of audio, video, device screens, and photos, together with related metadata.</a></li>
<li>[2] Apple iTunes 使用手册：<a href="https://support.apple.com/zh-cn/guide/itunes/itns41350225/windows">通过 PC 上 iTunes 中的“家庭共享”将内容流化到 Apple TV</a></li>
<li>[3] Apple TV 使用手册：<a href="https://support.apple.com/zh-cn/guide/tv/atvbc876df1e/tvos">在 Apple TV 上使用家庭共享流化内容</a></li>
<li>[4] Apple Support：<a href="https://support.apple.com/zh-cn/HT202190">使用“家庭共享”将媒体从电脑共享到其他设备</a></li>
</ul>

                </div>
            </article>
        </div>


        
            <div class="next-post">
                <div class="next gt-c-content-color-first">下一篇</div>
                <a href="https://wushuo.ink/post/LongLifeEvolution/" class="post-title gt-a-link">
                    转换器
                </a>
            </div>
        

        
          
        

        
            <script src='/media/javascript/Valine.min.js'></script>

<style>
	div#vcomments{
		width:100%;
		max-width: 1000px;
		padding: 2.5%
	}
</style>


	<div id="vcomments"></div>

	<script>
		new Valine({
			el: '#vcomments',
			appId: 'dtQgxkbPHHgPykb1bWoSGGe4-gzGzoHsz',
			appKey: 'Xlm8zjbsOtwtY2FL8hSgirCp',
			enableQQ: true,
			recordIP: false,
			meta: ['nick','mail','link'],
			placeholder: "在昵称内填写QQ号码就能拉取头像快速评论哦，留下你珍贵的评论吧！",
			// 设置Bilibili表情包地址
			emojiCDN: '//i0.hdslb.com/bfs/emote/', 
			// 表情title和图片映射
			emojiMaps: {
			"tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
			"tv_亲亲": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
			"tv_偷笑": "bb690d4107620f1c15cff29509db529a73aee261.png",
			"tv_再见": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
			"tv_冷漠": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
			"tv_发怒": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
			"tv_发财": "34db290afd2963723c6eb3c4560667db7253a21a.png",
			"tv_可爱": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
			"tv_吐血": "09dd16a7aa59b77baa1155d47484409624470c77.png",
			"tv_呆": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
			"tv_呕吐": "9f996894a39e282ccf5e66856af49483f81870f3.png",
			"tv_困": "241ee304e44c0af029adceb294399391e4737ef2.png",
			"tv_坏笑": "1f0b87f731a671079842116e0991c91c2c88645a.png",
			"tv_大佬": "093c1e2c490161aca397afc45573c877cdead616.png",
			"tv_大哭": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
			"tv_委屈": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
			"tv_害羞": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
			"tv_尴尬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
			"tv_微笑": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
			"tv_思考": "90cf159733e558137ed20aa04d09964436f618a1.png",
			"tv_惊吓": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
			"tv_打脸": "56ab10b624063e966bfcb76ea5dc4794d87dfd47.png",
			"tv_抓狂": "fe31c08edad661d63762b04e17b8d5ae3c71a757.png",
			"tv_抠鼻": "c666f55e88d471e51bbd9fab9bb308110824a6eb.png",
			"tv_斜眼笑": "911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png",
			"tv_无奈": "ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png",
			"tv_晕": "5443c22b4d07fb1907ccc610c8e6db254f2461b7.png",
			"tv_流汗": "cead1c351ab8d79e9f369605beb90148db0fbed3.png",
			"tv_流泪": "7e71cde7858f0cd50d74b0264aa26db612a8a167.png",
			"tv_流鼻血": "c32d39db2737f89b904ca32700d140a9241b0767.png",
			"tv_点赞": "f85c354995bd99e28fc76c869bfe42ba6438eff4.png",
			"tv_生气": "26702dcafdab5e8225b43ffd23c94ac1ff932654.png",
			"tv_生病": "8b0ec90e6b86771092a498c54f09fc94621c1900.png",
			"tv_疑问": "0793d949b18d7be716078349c202c15ff166f314.png",
			"tv_白眼": "c1d59f439e379ee50eef488bcb5e5378e5044ea4.png",
			"tv_皱眉": "72ccad6679fea0d14cce648b4d818e09b8ffea2d.png",
			"tv_目瞪口呆": "0b8cb81a68de5d5365212c99375e7ace3e7891b7.png",
			"tv_睡着": "8b196675b53af58264f383c50ad0945048290b33.png",
			"tv_笑哭": "1abc628f6d4f4caf9d0e7800878f4697abbc8273.png",
			"tv_腼腆": "89712c0d4af73e67f89e35cbc518420380a7f6f4.png",
			"tv_色": "61822c7e9aae5da76475e7892534545336b23a6f.png",
			"tv_调侃": "4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png",
			"tv_调皮": "b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png",
			"tv_鄙视": "6e72339f346a692a495b123174b49e4e8e781303.png",
			"tv_闭嘴": "c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png",
			"tv_难过": "87f46748d3f142ebc6586ff58860d0e2fc8263ba.png",
			"tv_馋": "fc7e829b845c43c623c8b490ee3602b7f0e76a31.png",
			"tv_鬼脸": "0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png",
			"tv_黑人问号": "45821a01f51bc867da9edbaa2e070410819a95b2.png",
			"tv_鼓掌": "1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"
			}
		})
	</script>

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">我的故事写不进作文</div>
    <div class="social-container">
        
            
                <a href="https://github.com/wushuobjfu" target="_blank">
                    <i class="fab fa-github gt-c-content-color-first"></i>
                </a>
            
        
            
                <a href="https://twitter.com/SuWhuo" target="_blank">
                    <i class="fab fa-twitter gt-c-content-color-first"></i>
                </a>
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        Powered by&nbsp;<a href="https://gridea.dev/" target="_blank">Gridea</a>&nbsp;and&nbsp;<a href="https://valine.js.org/" target="_blank">Valine</a> | <a href="https://wushuo.ink//atom.xml" target="_blank">RSS</a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
